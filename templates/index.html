<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YouTube Transcript & Details Fetcher</title>
    <style>
      body { font-family: Arial, sans-serif; max-width: 800px; margin: auto; padding: 1em; }
      form { margin-bottom: 1em; }
      textarea { width: 100%; height: 300px; font-size: 14px; padding: 8px; }
      img { max-width: 100%; height: auto; margin: 10px 0; }
      .video-details { 
        background-color: #f5f5f5; 
        padding: 15px; 
        border-radius: 8px;
        margin: 15px 0;
      }
      .details-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        grid-gap: 10px;
      }
      .detail-item {
        padding: 8px;
        border-bottom: 1px solid #ddd;
      }
      .detail-label {
        font-weight: bold;
        color: #555;
      }
      .source-info {
        font-style: italic;
        color: #666;
        margin-top: 5px;
      }
    </style>
</head>
<body>
  <h1>YouTube Transcript & Details Fetcher</h1>
  <form method="POST">
    <input type="text" name="url" placeholder="Paste YouTube URL" size="60" required
           value="{{ user_url or '' }}">
    <button type="submit">Fetch</button>
  </form>
  
  {% if error %}
    <p style="color: red;">Error: {{ error }}</p>
  {% endif %}

  {% if video_title %}
    <h2>{{ video_title }}</h2>
    <img src="{{ thumbnail }}" alt="Video Thumbnail">
    
    {% if video_details %}
    <div class="video-details">
      <h3>Video Details</h3>
      <div class="details-grid">
        {% if video_details.channel %}
        <div class="detail-item">
          <div class="detail-label">Channel</div>
          <div>{{ video_details.channel }}</div>
        </div>
        {% endif %}
        
        {% if video_details.duration %}
        <div class="detail-item">
          <div class="detail-label">Duration</div>
          <div>{{ video_details.duration }}</div>
        </div>
        {% endif %}
        
        {% if video_details.views %}
        <div class="detail-item">
          <div class="detail-label">Views</div>
          <div>{{ video_details.views }}</div>
        </div>
        {% endif %}
        
        {% if video_details.likes %}
        <div class="detail-item">
          <div class="detail-label">Likes</div>
          <div>{{ video_details.likes }}</div>
        </div>
        {% endif %}
        
        {% if video_details.upload_date %}
        <div class="detail-item">
          <div class="detail-label">Upload Date</div>
          <div>{{ video_details.upload_date }}</div>
        </div>
        {% endif %}
      </div>
    </div>
    {% endif %}
    
    <h3>Transcript</h3>
    <div class="source-info">Source: {{ source }}</div>
    <textarea readonly>{{ transcript }}</textarea>
  {% endif %}
</body>
</html>
